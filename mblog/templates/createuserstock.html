{% extends "__base.html" %}
{% block content %}
<div class="row">
  <div class="col-md-12">
    <form method="post" action="/data/stock">

      <div class="form-group row">
        <label for="code" class="col-sm-4 col-form-label">CODE</label>
        <div class="col-sm-8">
          <input class="form-control" type="text" value="000001" id="code" name="code">
        </div>
      </div>

      <div class="form-group row">
        <label for="hold-position" class="col-sm-4 col-form-label">HOLD POSITION</label>
        <div class="col-sm-8">
          <input class="form-control" type="text" value="100" id="hold-position" name="hold_position">
        </div>
      </div>

      <div class="form-group row">
        <label for="bid-price" class="col-sm-4 col-form-label">BID PRICE</label>
        <div class="col-sm-8">
          <input class="form-control" type="text" value="10.11" id="bid-price" name="bid_price">
        </div>
      </div>

      <div class="form-group row">
        <label for="stop-loss-price" class="col-sm-4 col-form-label">STOP LOSS PRICE</label>
        <div class="col-sm-8">
          <input class="form-control" type="text" value="10.11" id="stop-loss-price" name="stop_loss_price">
        </div>
      </div>

      <div class="form-group row">
        <label for="risk" class="col-sm-4 col-form-label">RISK PERCENT</label>
          <div class="input-group">
            <input class="form-control col-sm-4" type="text" value="0" id="risk">
            <div class="input-group-addon">%</div>
          </div>
        </div>

      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>
</div>
{% endblock %}
{% block script %}
<script>
function cal_percentage(bid_price, stop_loss_price){
        return ((bid_price - stop_loss_price) / bid_price * 100).toFixed(2);
}
function cal_stop_loss_price(bid_price, risk_percent){
        return (bid_price - risk_percent * bid_price / 100).toFixed(2);
}

$("#stop-loss-price").change(function(){
                percent = cal_percentage($("#bid-price").val(), $("#stop-loss-price").val());
                $("#risk").val(percent);
  })

$("#risk").change(function(){
                percent = cal_stop_loss_price($("#bid-price").val(), $("#risk").val());
                $("#stop-loss-price").val(percent);
  })

</script>
{% endblock %}
